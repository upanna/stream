<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>MM Radio Player</title>

<!-- HLS.js for .m3u8 Support -->
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

<style>
    body { font-family: sans-serif; background:#f2f2f2; padding:20px; }
    .player-box { background: white; padding:20px; border-radius:10px; width:300px; }
</style>
</head>
<body>

<div class="player-box">
    <h3>MM Radio Stream Player</h3>
    <audio id="audio" controls autoplay></audio>
</div>

<script>
// ----------- STREAM URL ကို ဒီမှာ ပြောင်းပြင်ပါ -----------
const stream_m3u8 = "https://mmradio.netlify.app/stream.m3u8";
const stream_aac  = "https://mmradio.netlify.app/stream.aac";
const stream_mp3  = "https://mmradio.netlify.app/stream.mp3";

// -------------------------------------------------------------

let audio = document.getElementById("audio");

// Browser support HLS?
if (Hls.isSupported()) {
    const hls = new Hls();
    hls.loadSource(stream_m3u8);
    hls.attachMedia(audio);
} else {
    // iPhone/Safari (native .m3u8 support)
    audio.src = stream_m3u8;
}

// Backup formats (.aac / .mp3) if .m3u8 fails
audio.addEventListener("error", () => {
    console.log("m3u8 failed, switching to AAC");
    audio.src = stream_aac;

    audio.addEventListener("error", () => {
        console.log("AAC failed, switching to MP3");
        audio.src = stream_mp3;
    });
});
</script>

</body>
</html>
